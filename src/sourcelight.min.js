function define(a,b){SourceLight.mappings[a]=b}function fetch(a){if(!SourceLight.mappings[a])throw a+" undefined.";return SourceLight.mappings[a]}class SourceLight{static highlight(a){(function(a){if(!a.selector)throw"selector field undefined.";if(!a.mode)throw"mode field undefined.";if(!a.theme)throw"theme field undefined."})(a);let b=function(a){return a.startsWith("#")?[document.getElementById(a.slice(1))]:a.startsWith(".")?document.getElementsByClassName(a.slice(1)):document.getElementsByTagName(a)}(a.selector),c=function(a){let b=Object.keys(a),c={};for(var d in b){d=b[d];let f="",g=a[d],h=Object.keys(g);for(var e in h)e=h[e],f+=e+":"+(g[e]+";");c[d]=f+"\""}return c}(fetch("sourcelight/theme/"+a.theme));for(var d=0;d<b.length;d++){let e=b[d];e.innerHTML=SourceLight.lex(e.innerHTML,fetch("sourcelight/mode/"+a.mode),c),e.setAttribute("style",c["code.region"])}}static lex(a,b,c){let d={};for(var e in b){let c=b[e],g=c.token,h=c.match,i=c.sub,j=a.match(new RegExp(h,"g"));for(var f in j)f=j[f],d[a.indexOf(f)]=[f,g,i],a=a.replace(f,"\0".repeat(f.length),1)}let g=Object.keys(d),h=[];for(var i in g)h[i]=d[g[i]];for(var j in h)j=h[j],a=a.replace("\0".repeat(j[0].length),SourceLight.generate(j,c),1);return a}static generate(a,b){return a[2]&&(a[0]=SourceLight.lex(a[0],a[2],b)),Object.keys(b).includes(a[1])?"<span style=\""+b[a[1]]+"\">"+a[0]+"</span>":"<span class=\"sourcelight-undefined\">"+a[0]+"</span>"}}SourceLight.mappings={};